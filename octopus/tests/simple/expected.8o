  :const USE_SCROLL 0
  :const AUTO-INCREMENT 1   # Don't trip over comments!


: main
  i := pointer
  load v2
  # Manipulate v0 - v2 here, or whatever

  # The value of i now depends on the interpreter running the binary. On Super
  # CHIP it still points to `pointer`, whereas in most other interpreters it
  # will point to `pointer` plus three. Let's fix that with a conditional:
  save v2


  # ...

# When writing programs for XO-CHIP, you want your data to end up at the end of
# memory and your code at the beginning. Because only the first 3.5K of memory
# is executable. But we don't always want our source files to be structured in
# that way. Using Octopus, we can mark a section as data, and it will
# automatically be moved down:


# If your project grows, you don't want to keep everything in a single file
# anymore. Octopus allows you to recursively include files:

: included-stuff
  return


# Maybe, depending on some variable, you want to load a different version of a
# file. That's possible too:

: included-vip-stuff
  return


# We can also include a binary file as-is:

: chip8-logo-rom
  0x00 0xe0 0x61 0x08 0x60 0x08 0xa2 0x2a 0xd0 0x1f 0x60 0x10 0xa2 0x39 0xd0 0x1f
  0x60 0x18 0xa2 0x48 0xd0 0x1f 0x60 0x20 0xa2 0x57 0xd0 0x1f 0x60 0x28 0xa2 0x66
  0xd0 0x1f 0x60 0x30 0xa2 0x75 0xd0 0x1f 0x12 0x28 0x1f 0x3f 0x71 0xe0 0xe5 0xe0
  0xe8 0xe7 0xe0 0xe0 0xe0 0xe0 0x71 0x3f 0x1f 0x18 0xb8 0xb8 0x38 0x38 0x3f 0xbf
  0x39 0x38 0x38 0x38 0x38 0xb8 0xb8 0x38 0x0c 0x1d 0x1d 0x01 0x0d 0x1d 0x9d 0xdd
  0xdd 0xdd 0xdd 0xdd 0xdd 0xdd 0xdd 0xf8 0xfc 0xce 0xc6 0xc6 0xc6 0xc6 0xce 0xfc
  0xf8 0xc0 0xc0 0xc0 0xc0 0xc0 0x00 0x01 0x03 0x03 0x03 0x01 0xf0 0xf1 0x03 0x07
  0x07 0x07 0x07 0x03 0x01 0xfe 0xc7 0x83 0x83 0x83 0xc6 0xfc 0xce 0x87 0x03 0x03
  0x03 0x87 0xfe 0xfc


# Including files that don't exist gives us useful errors:

# Error: Requested file 'nonexistent.8o' not found
:assert "Requested file 'nonexistent.8o' not found" { 0 }
# Error: Requested file 'nonexistent.bin' not found
:assert "Requested file 'nonexistent.bin' not found" { 0 }

# Including an image without the image-loader present gives a useful error:

# Error: Attempt to include image 'mypicture.png' failed.
# Install package '@chipcode/image-loader' to be able to include image files directly
:assert "Can't include image files directly without @chipcode/image-loader" { 0 }
: table
  0x00 0x01
  0x02 0x03

: some-data-here
  0 1 2 3 4 5 6
